<html>
<h1>2 Site Model</h1>
<p> The files contained in the directory are for the simulation of the tight binding hubbard model with interactions for an ensemble of 2 site systems. The program will calculate the density of states (DOS), generalized inverse participaion ratio (GIPR) and the filling of the DOS.</p> 
<p>Information regarding the use and structure of the code can be found in this README file. Addiontianal information regarding terminology and the problem being solved refer to the README in the AH-onsite directory (the parent directory of this one). The directory <em>validation</em> contains a pdf and .tex file (and images used in the files) that outlines the tests conducted and validation of the program.</p>
<h3>1. Downloading files</h3>
<p>Fork the repository AH-onsite to your GitHub account if you have not already done so. If would do not wish to use GitHub the files can be individually downloaded. The files needed to create the executable are <em>routines.f90, main.f90, makefile</em>. If you plan on modifying the files and wanting the update the files on GitHub we highly recommend forking the repository (information on how to use GitHub to create your personal repository can be found in the README in the AH-onsite directory). </p>
<h3>2. Compilling and Running</h3>
<h4>Basic</h4>
<p>Download all the files to a directory or use your forked repository (information on how to do this in README in AH-onsite directory). If you plan on modifying the files and wanting the update the files on GitHub we recommend forking. </p>
<p>In the 2site folder type the command "<em>make</em>". This will compile the executable. To get remove auxiliary type "<em>make clean</em>". The executable is called <em>main.e</em> and it can be run using the command "<em>./main.e</em>". </p>
<p>To modify the input variables open main.f90 in a text editor. In the section labeled input parameters (line 25-33) modify the variables. The description of each variable can be found in the comments beside it.
<h4>Advanced</h4>
<p>The compiller specified in the makefile is gfortran if you would like to use another compiller open the makefile in a text editor and set the variable CC to the compiller of your choice. To modify the optimization of the code or add additional flags for debugging or other purposes add them to the CFLAGS variable in the makefile. Optimization -O0 is lowest and -O3 is highest. Currently the interacting case can only be run with optimization -O0 since adding optimization introduces errors.</p>
<p>The only library that needs to be linked is the LAPACK library (linear algebra package). If not already owned it can be downloaded <a href="http://www.netlib.org/lapack/#_lapack_version_3_5_0" target="_blank">here</a>.</p>
<p> To modify other aspects of the program read through the structure section in order to understand the location of the feauture you would like to change. </p>
<h3>3. Data and Graphs</h3>
Previous data and graphs that have been using this code can be found in the <em>data</em> directory. The graphs are stored as .agr files and can be opened using xmgrace and some as also saved in pdf format. The files have names based on the parameters of the simulation that created them. </p> 
<p>The subdirectory in <em>data</em> called <em>filling</em> containes data for simulations run away from half filling. There are also graphs that compare the DOS and GIPR for different fillings.</p>
<p>At the top of the data files there contains information about the simulation that created the data as well as the filling of the DOS. Then there are three labeled columns. The first column is the frequency of each energy bin, the second is the DOS of that bin and the third is the GIPR.</p>
<p>On the top of the data files more information regarding the simulation can be found as well as the filling of the DOS.</p>
<h3>4. Structure of Program</h3>
<h4>General</h4>
The file main.f90 contains the main program. This file is where the parameters are declared as well as any dependent variables that are only need in main.f90. The file routines.f90 contains the module <em>routines</em> which has all the subroutines need for the program. At the top of routines.f90 any variables that are needed in both main.f90 and in the subroutines are declared so that the when the subroutine is called the variables do not need to be passed as arguments. The final executable is called main.e and it will output data to a file ending in <em>.dat</em></p>
<h4>Main Preperation</h4>
<p>A series of subroutines are called. The first seeds the random generator using the system clock (this is needed to assign site potentials later on) then the file name is assigned and some lookup tables for the photo emmission specturm (PES) and inverse photo emmision specturm (IPES) of the basis are entered.</p>
<h4>Main Loop</h4>
<p>The program calls a subroutine (site_potentials) that will assign values for all the site potentials. These values are chosen from a uniform distribution bounded between -W/2 and W/2 (W is the disorder strength and a parameter of the program). </p>
<p>The hamiltonian matrices are then contructed. The hamiltonians are constructed for the basic described at the top of the file <em>main.f90</em>. They are sparse and block diagonal since only states with the same number of up and down electrons can interact due to conservation of spin and particle number (a state with 2 up and 1 down cannot hop to a state with 1up and 1 down). The matrices are split into smaller submatrices based on the amount of up and down electrons the basis states have. Each of these matrices are solved for their eigenvalues and eigenvectors using LAPACK (linear algebra package). From the eigenvalues the grand potentials are calculated (eigenvalue - (chemical potential)*(number of electrons)). The state with the lowest grand potential is the ground state and the corresponding vector is the ground state vector. </p>
<p> In the main program again now the PES and IPES lookup tables are used to find the ground state vector (represented in respect to the basis) after being operated on by a photo or inverse photo emmision from each site (total of 4 possibilities: PES_up from site 1 or 2 and PES_dn from site 1 or 2). These terms are needed in order to evaluate the Green's function which gives the local density of states for each site.</p>
<p>The local densities of states (LDOS) are all calculated now for each site. The weight of the each contribution is found by doing the dot product of each of the transformed wavefunctions (by PES and IPES) with every other wavefunction (all the other eigenvectors). The contribution of the spin up and spin down components are averaged. To find the energy of the contribution to the LDOS the program find the difference between the lowest grand pontential and the grand pontential of the eigenvector it's dot producting with. This difference is made negative if the ground wavefunction was transformed with a IPE and positive if it was transformed with a PE. The reason behind all these calculations is found in the Green's function.</p>
<p> The program now averages the LDOS contributions for each energy and then puts them into energy bins (in order to get a smooth graph) and makes a contribution to the DOS. The GIPR is also calculated at the same time using the LDOS.</p>
<h4>Final Calculations</h4>
<p>The total area underneath the DOS is calculated and then normalized to 1 and the filling is also calcuated at this time. The DOS and GIPR are outputted to the data file as well as the filling. The program is now complete.</p>
<h3>5. Equations Used</h3>
Green's Function: <br>
<br>
![equation](http://www.sciweavers.org/tex2img.php?eq=%5Crho_i%20%3D%20%5Csum_%7B%5Csigma%2Cq%7D%5Cbigg%28%20%5Cbig%7C%5Cleft%3C%5CPsi_%7Bq%7D%7Cc_%7Bi%5Csigma%7D%5E%7B%5Cdagger%7D%7C%5CPsi_0%5Cright%3E%5Cbig%7C%5E2%20%5C%20%5Cdelta%20%5Cbig%28%5Comega%20-%20%28%5COmega_q%20-%20%5COmega_0%29%5Cbig%29%20%2B%20%5Cbig%7C%5Cleft%3C%5CPsi_%7Bq%7D%7Cc_%7Bi%5Csigma%7D%7C%5CPsi_0%5Cright%3E%5Cbig%7C%5E2%20%5C%20%5Cdelta%20%5Cbig%28%5Comega%20%2B%20%28%5COmega_q%20-%20%5COmega_0%29%5Cbig%29%20%5Cbigg%29&bc=White&fc=Black&im=jpg&fs=12&ff=arev&edit=0) (1)
</html>
